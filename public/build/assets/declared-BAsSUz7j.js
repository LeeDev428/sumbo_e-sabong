import{r as o,u as A,j as e,H as F,a as c}from"./app-DXesRuhA.js";import{D as M}from"./declarator-layout-BWIGL73C.js";import"./app-r9e1jDlp.js";function O({declared_fights:p=[]}){const[w,x]=o.useState(!1),[f,m]=o.useState(!1),[v,b]=o.useState(!1),[t,l]=o.useState(null),[a,h]=o.useState("7.5"),{data:n,setData:d,post:C,processing:j,errors:y}=A({new_result:""}),S=s=>{l(s),d("new_result",s.result),x(!0)},_=s=>{l(s),m(!0)},L=s=>{s.preventDefault(),t&&C(`/declarator/change-result/${t.id}`,{onSuccess:()=>{x(!1),l(null)}})},i=(s,r)=>{c.post(`/declarator/fights/${s}/status`,{status:r},{preserveScroll:!0,onSuccess:()=>{m(!1),l(null)}})},E=s=>{c.post(`/declarator/bet-controls/${s}/toggle-meron`,{},{preserveScroll:!0})},D=s=>{c.post(`/declarator/bet-controls/${s}/toggle-wala`,{},{preserveScroll:!0})},$=s=>{l(s),h(s.commission_percentage?.toString()||"7.5"),b(!0)},k=()=>{t&&c.post(`/declarator/bet-controls/${t.id}/commission`,{commission_percentage:parseFloat(a)},{preserveScroll:!0,onSuccess:()=>{b(!1),l(null)}})},N=s=>{switch(s){case"meron":return"bg-red-600";case"wala":return"bg-blue-600";case"draw":return"bg-green-600";case"cancelled":return"bg-gray-600";default:return"bg-purple-600"}},R=s=>{switch(s){case"standby":return"bg-gray-600";case"open":return"bg-green-600";case"lastcall":return"bg-yellow-600";case"closed":return"bg-red-600";case"result_declared":return"bg-blue-600";case"cancelled":return"bg-gray-500";default:return"bg-gray-600"}},T=s=>{switch(s){case"standby":return"STANDBY";case"open":return"BETTING OPEN";case"lastcall":return"LAST CALL";case"closed":return"BETTING CLOSED";case"result_declared":return"RESULT DECLARED";case"cancelled":return"CANCELLED";default:return s.toUpperCase()}};return e.jsxs(M,{children:[e.jsx(F,{title:"Declared Fights"}),e.jsxs("div",{className:"p-4 lg:p-8",children:[e.jsx("div",{className:"flex justify-between items-center mb-6 lg:mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-white mb-2",children:"Declared Fights"}),e.jsx("p",{className:"text-sm lg:text-base text-gray-400",children:"View and manage declared fight results"})]})}),e.jsxs("div",{className:"grid gap-4 lg:gap-6",children:[p.map(s=>{const r=(s.total_meron_bets||0)+(s.total_wala_bets||0),u=r>0?(s.total_meron_bets||0)/r*100:50,g=r>0?(s.total_wala_bets||0)/r*100:50;return e.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-8 hover:bg-gray-750 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-white",children:["#",s.fight_number]}),e.jsx("span",{className:`px-4 py-1 rounded-full text-sm font-medium ${R(s.status)}`,children:T(s.status)}),s.result&&e.jsxs("span",{className:`px-4 py-1 rounded-full text-sm font-medium ${N(s.result)}`,children:["Result: ",s.result.toUpperCase()]}),s.commission_percentage!==void 0&&e.jsxs("button",{onClick:()=>$(s),className:"px-3 py-1 bg-purple-600 hover:bg-purple-700 rounded-full text-xs font-semibold text-white",children:["Commission: ",s.commission_percentage,"%"]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:`border rounded-lg p-4 ${s.result==="meron"?"bg-red-900/50 border-red-500":"bg-red-900/30 border-red-700"}`,children:[e.jsxs("div",{className:"text-xs text-red-300 mb-2",children:["MERON ",s.result==="meron"&&"ðŸ‘‘ WINNER"]}),e.jsx("div",{className:"font-bold text-white mb-2",children:s.meron_fighter}),e.jsxs("div",{className:"text-2xl font-bold text-red-400",children:[s.meron_odds||"---","x"]})]}),e.jsxs("div",{className:`border rounded-lg p-4 ${s.result==="draw"?"bg-green-900/50 border-green-500":"bg-green-900/30 border-green-700"}`,children:[e.jsxs("div",{className:"text-xs text-green-300 mb-2",children:["DRAW ",s.result==="draw"&&"ðŸ‘‘"]}),e.jsx("div",{className:"font-bold text-white mb-2",children:"Match Draw"}),e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[s.draw_odds||"---","x"]})]}),e.jsxs("div",{className:`border rounded-lg p-4 ${s.result==="wala"?"bg-blue-900/50 border-blue-500":"bg-blue-900/30 border-blue-700"}`,children:[e.jsxs("div",{className:"text-xs text-blue-300 mb-2",children:["WALA ",s.result==="wala"&&"ðŸ‘‘ WINNER"]}),e.jsx("div",{className:"font-bold text-white mb-2",children:s.wala_fighter}),e.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[s.wala_odds||"---","x"]})]}),e.jsxs("div",{className:"flex flex-col justify-center bg-gray-700/50 border border-gray-600 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Total Bets"}),e.jsx("div",{className:"text-xl font-bold text-white mb-3",children:s.total_bets}),e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Payouts"}),e.jsxs("div",{className:"text-lg font-bold text-green-400",children:["â‚±",s.total_payouts.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-400",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Created:"})," ",new Date(s.created_at).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Declared:"})," ",new Date(s.declared_at).toLocaleString()]})]}),(s.status==="open"||s.status==="lastcall"||s.status==="standby")&&e.jsxs("div",{className:"mt-6 border-t border-gray-700 pt-6",children:[e.jsx("h4",{className:"text-lg font-bold text-white mb-4",children:"ðŸŽ® Bet Controls"}),r>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex h-10 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-red-600 flex items-center justify-center text-white font-bold transition-all text-sm",style:{width:`${u}%`},children:u>15&&`${u.toFixed(0)}%`}),e.jsx("div",{className:"bg-blue-600 flex items-center justify-center text-white font-bold transition-all text-sm",style:{width:`${g}%`},children:g>15&&`${g.toFixed(0)}%`})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`border-2 rounded-lg p-4 transition-all ${s.meron_betting_open?"border-red-600 bg-red-900/20":"border-gray-600 bg-gray-700/50"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-red-400 font-bold mb-1",children:"MERON"}),e.jsx("p",{className:"text-white text-sm font-semibold",children:s.meron_fighter})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-gray-400 text-xs",children:"Bets"}),e.jsxs("div",{className:"text-white font-bold",children:["â‚±",(s.total_meron_bets||0).toLocaleString()]})]})]}),e.jsx("button",{onClick:()=>E(s.id),className:`w-full py-2 rounded-lg font-bold transition-all text-sm ${s.meron_betting_open?"bg-red-600 hover:bg-red-700 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-300"}`,children:s.meron_betting_open?"âœ… ACCEPTING":"ðŸ”’ CLOSED"}),!s.meron_betting_open&&e.jsx("p",{className:"text-yellow-400 text-xs mt-2 text-center",children:"âš ï¸ Tellers cannot bet on Meron"})]}),e.jsxs("div",{className:`border-2 rounded-lg p-4 transition-all ${s.wala_betting_open?"border-blue-600 bg-blue-900/20":"border-gray-600 bg-gray-700/50"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-blue-400 font-bold mb-1",children:"WALA"}),e.jsx("p",{className:"text-white text-sm font-semibold",children:s.wala_fighter})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-gray-400 text-xs",children:"Bets"}),e.jsxs("div",{className:"text-white font-bold",children:["â‚±",(s.total_wala_bets||0).toLocaleString()]})]})]}),e.jsx("button",{onClick:()=>D(s.id),className:`w-full py-2 rounded-lg font-bold transition-all text-sm ${s.wala_betting_open?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-300"}`,children:s.wala_betting_open?"âœ… ACCEPTING":"ðŸ”’ CLOSED"}),!s.wala_betting_open&&e.jsx("p",{className:"text-yellow-400 text-xs mt-2 text-center",children:"âš ï¸ Tellers cannot bet on Wala"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 min-w-[160px]",children:[e.jsx("button",{onClick:()=>_(s),className:"px-4 py-2.5 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm font-medium whitespace-nowrap",children:"Change Status"}),s.status==="closed"&&!s.result&&e.jsx("button",{onClick:()=>c.visit("/declarator/pending"),className:"px-4 py-2.5 bg-green-700 hover:bg-green-600 rounded-lg text-sm font-medium whitespace-nowrap",children:"Declare Result"}),s.result&&e.jsx("button",{onClick:()=>S(s),className:"px-4 py-2.5 bg-yellow-700 hover:bg-yellow-600 rounded-lg text-sm font-medium whitespace-nowrap",children:"Change Result"})]})]})},s.id)}),p.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“‹"}),e.jsx("p",{className:"text-xl font-medium mb-2",children:"No declared fights yet"}),e.jsx("p",{className:"text-sm",children:"Declared fights will appear here"})]})]})]}),w&&t&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-700",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Change Result - Fight #",t.fight_number]}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-700 rounded",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Current Matchup:"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"text-red-400 font-semibold",children:t.meron_fighter}),e.jsx("span",{className:"text-gray-500",children:"vs"}),e.jsx("span",{className:"text-blue-400 font-semibold",children:t.wala_fighter})]}),e.jsxs("div",{className:"text-sm text-gray-400 mt-2",children:["Current Result: ",e.jsx("span",{className:`font-bold ${N(t.result)} px-2 py-0.5 rounded`,children:t.result.toUpperCase()})]})]}),e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("button",{type:"button",onClick:()=>d("new_result","meron"),className:`w-full px-4 py-3 rounded-lg text-left font-medium transition-colors ${n.new_result==="meron"?"bg-red-600 ring-2 ring-red-400":"bg-red-800/50 hover:bg-red-700"}`,children:["ðŸ‘Š MERON - ",t.meron_fighter]}),e.jsxs("button",{type:"button",onClick:()=>d("new_result","wala"),className:`w-full px-4 py-3 rounded-lg text-left font-medium transition-colors ${n.new_result==="wala"?"bg-blue-600 ring-2 ring-blue-400":"bg-blue-800/50 hover:bg-blue-700"}`,children:["ðŸ‘Š WALA - ",t.wala_fighter]}),e.jsx("button",{type:"button",onClick:()=>d("new_result","draw"),className:`w-full px-4 py-3 rounded-lg text-left font-medium transition-colors ${n.new_result==="draw"?"bg-green-600 ring-2 ring-green-400":"bg-green-800/50 hover:bg-green-700"}`,children:"ðŸ¤ DRAW"}),e.jsx("button",{type:"button",onClick:()=>d("new_result","cancelled"),className:`w-full px-4 py-3 rounded-lg text-left font-medium transition-colors ${n.new_result==="cancelled"?"bg-gray-600 ring-2 ring-gray-400":"bg-gray-700/50 hover:bg-gray-600"}`,children:"âŒ CANCELLED"})]}),y.new_result&&e.jsx("p",{className:"text-sm text-red-500 mb-4",children:y.new_result}),e.jsx("div",{className:"bg-yellow-900/30 border border-yellow-700 p-3 rounded mb-6",children:e.jsx("p",{className:"text-yellow-300 text-sm",children:"âš ï¸ Warning: This will recalculate all payouts for this fight!"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{x(!1),l(null)},className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:j||!n.new_result,className:"flex-1 px-4 py-2 bg-yellow-600 hover:bg-yellow-700 rounded-lg font-medium disabled:opacity-50",children:j?"Changing...":"Change Result"})]})]})]})}),f&&t&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-700",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Change Status - Fight #",t.fight_number]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("button",{onClick:()=>i(t.id,"standby"),disabled:t.status==="standby",className:"w-full px-4 py-3 bg-gray-600 hover:bg-gray-700 rounded-lg text-left font-medium disabled:opacity-50",children:"â¸ï¸ STANDBY"}),e.jsx("button",{onClick:()=>i(t.id,"open"),disabled:t.status==="open",className:"w-full px-4 py-3 bg-green-600 hover:bg-green-700 rounded-lg text-left font-medium disabled:opacity-50",children:"âœ… OPEN BETTING"}),e.jsx("button",{onClick:()=>i(t.id,"lastcall"),disabled:t.status==="lastcall",className:"w-full px-4 py-3 bg-yellow-600 hover:bg-yellow-700 rounded-lg text-left font-medium disabled:opacity-50",children:"âš ï¸ LAST CALL"}),e.jsx("button",{onClick:()=>i(t.id,"closed"),disabled:t.status==="closed",className:"w-full px-4 py-3 bg-red-600 hover:bg-red-700 rounded-lg text-left font-medium disabled:opacity-50",children:"ðŸ”’ CLOSE BETTING"})]}),e.jsx("button",{onClick:()=>{m(!1),l(null)},className:"w-full px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",children:"Cancel"})]})}),v&&t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Set Commission Percentage"}),e.jsxs("p",{className:"text-gray-400 mb-4",children:["Fight #",t.fight_number,": ",t.meron_fighter," vs ",t.wala_fighter]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Commission Percentage (%)"}),e.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a,onChange:s=>h(s.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white text-lg"}),e.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"Default is 7.5%. This will be deducted from the total pot before payout."})]}),(t.total_meron_bets||0)+(t.total_wala_bets||0)>0&&e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4 mb-6 text-sm",children:[e.jsx("p",{className:"text-gray-400 mb-2",children:"Example with current pot:"}),e.jsxs("div",{className:"space-y-1 text-gray-300",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Pot:"}),e.jsxs("span",{className:"font-semibold",children:["â‚±",((t.total_meron_bets||0)+(t.total_wala_bets||0)).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-purple-400",children:[e.jsxs("span",{children:["Commission (",a,"%):"]}),e.jsxs("span",{className:"font-semibold",children:["â‚±",(((t.total_meron_bets||0)+(t.total_wala_bets||0))*(parseFloat(a)/100)).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-600 pt-1 mt-1",children:[e.jsx("span",{children:"Net Pot:"}),e.jsxs("span",{className:"font-semibold text-green-400",children:["â‚±",(((t.total_meron_bets||0)+(t.total_wala_bets||0))*(1-parseFloat(a)/100)).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{b(!1),l(null)},className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:k,className:"flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg font-medium",children:"Update Commission"})]})]})})]})}export{O as default};
