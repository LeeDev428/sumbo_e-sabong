import{c as We,r as c,u as Pe,j as t,a as Fe,H as Oe}from"./app-BgSQ57FJ.js";import{A as Ue}from"./admin-layout-DbsNSNJR.js";import{P as Ve}from"./pagination-gUoKzgOz.js";import"./app-r9e1jDlp.js";function Ke(M){const e=We.c(112),{fights:l,filters:$}=M,[o,Re]=c.useState($.search||""),[i,ke]=c.useState($.status||""),[d,De]=c.useState($.result||""),[m,Ae]=c.useState($.date_from||""),[x,Te]=c.useState($.date_to||""),[je,Le]=c.useState(!1),[r,Ee]=c.useState(null);let O;e[0]===Symbol.for("react.memo_cache_sentinel")?(O={new_result:"",reason:""},e[0]=O):O=e[0];const{data:H,setData:n,post:Ne,processing:W,errors:u,reset:ve}=Pe(O);let U;e[1]!==n?(U=s=>{Ee(s),n("new_result",""),n("reason",""),Le(!0)},e[1]=n,e[2]=U):U=e[2];const P=U;let V;e[3]!==ve?(V=()=>{Le(!1),Ee(null),ve()},e[3]=ve,e[4]=V):V=e[4];const h=V;let q;e[5]!==h||e[6]!==Ne||e[7]!==r?(q=s=>{s.preventDefault(),r&&Ne(`/declarator/change-result/${r.id}`,{preserveScroll:!0,onSuccess:()=>{h()}})},e[5]=h,e[6]=Ne,e[7]=r,e[8]=q):q=e[8];const we=q;let z;e[9]!==m||e[10]!==x||e[11]!==d||e[12]!==o||e[13]!==i?(z=()=>{Fe.get("/admin/history",{search:o,status:i,result:d,date_from:m,date_to:x},{preserveState:!0,preserveScroll:!0})},e[9]=m,e[10]=x,e[11]=d,e[12]=o,e[13]=i,e[14]=z):z=e[14];const _e=z;let B;e[15]===Symbol.for("react.memo_cache_sentinel")?(B=()=>{Re(""),ke(""),De(""),Ae(""),Te(""),Fe.get("/admin/history",{},{preserveState:!0,preserveScroll:!0})},e[15]=B):B=e[15];const $e=B,He=ze,Me=qe;let G;e[16]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsx(Oe,{title:"Fight History - Admin"}),e[16]=G):G=e[16];let I;e[17]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Fight History"}),t.jsx("p",{className:"text-gray-400",children:"View and filter all past fights"})]}),e[17]=I):I=e[17];let J;e[18]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx("h3",{className:"text-lg font-bold mb-4",children:"Filters"}),e[18]=J):J=e[18];let K;e[19]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Search"}),e[19]=K):K=e[19];let Q;e[20]===Symbol.for("react.memo_cache_sentinel")?(Q=s=>Re(s.target.value),e[20]=Q):Q=e[20];let g;e[21]!==o?(g=t.jsxs("div",{children:[K,t.jsx("input",{type:"text",value:o,onChange:Q,placeholder:"Fight number, fighter name...",className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e[21]=o,e[22]=g):g=e[22];let X;e[23]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),e[23]=X):X=e[23];let Y;e[24]===Symbol.for("react.memo_cache_sentinel")?(Y=s=>ke(s.target.value),e[24]=Y):Y=e[24];let Z,ee,te,le,se,ae,re;e[25]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx("option",{value:"",children:"All Statuses"}),ee=t.jsx("option",{value:"standby",children:"Standby"}),te=t.jsx("option",{value:"open",children:"Open"}),le=t.jsx("option",{value:"lastcall",children:"Last Call"}),se=t.jsx("option",{value:"closed",children:"Closed"}),ae=t.jsx("option",{value:"result_declared",children:"Result Declared"}),re=t.jsx("option",{value:"cancelled",children:"Cancelled"}),e[25]=Z,e[26]=ee,e[27]=te,e[28]=le,e[29]=se,e[30]=ae,e[31]=re):(Z=e[25],ee=e[26],te=e[27],le=e[28],se=e[29],ae=e[30],re=e[31]);let p;e[32]!==i?(p=t.jsxs("div",{children:[X,t.jsxs("select",{value:i,onChange:Y,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500",children:[Z,ee,te,le,se,ae,re]})]}),e[32]=i,e[33]=p):p=e[33];let ne;e[34]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Result"}),e[34]=ne):ne=e[34];let ce;e[35]===Symbol.for("react.memo_cache_sentinel")?(ce=s=>De(s.target.value),e[35]=ce):ce=e[35];let oe,ie,de,me,xe;e[36]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx("option",{value:"",children:"All Results"}),ie=t.jsx("option",{value:"meron",children:"Meron"}),de=t.jsx("option",{value:"wala",children:"Wala"}),me=t.jsx("option",{value:"draw",children:"Draw"}),xe=t.jsx("option",{value:"cancelled",children:"Cancelled"}),e[36]=oe,e[37]=ie,e[38]=de,e[39]=me,e[40]=xe):(oe=e[36],ie=e[37],de=e[38],me=e[39],xe=e[40]);let f;e[41]!==d?(f=t.jsxs("div",{children:[ne,t.jsxs("select",{value:d,onChange:ce,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500",children:[oe,ie,de,me,xe]})]}),e[41]=d,e[42]=f):f=e[42];let ue;e[43]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date From"}),e[43]=ue):ue=e[43];let he;e[44]===Symbol.for("react.memo_cache_sentinel")?(he=s=>Ae(s.target.value),e[44]=he):he=e[44];let b;e[45]!==m?(b=t.jsxs("div",{children:[ue,t.jsx("input",{type:"date",value:m,onChange:he,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e[45]=m,e[46]=b):b=e[46];let ge;e[47]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date To"}),e[47]=ge):ge=e[47];let pe;e[48]===Symbol.for("react.memo_cache_sentinel")?(pe=s=>Te(s.target.value),e[48]=pe):pe=e[48];let y;e[49]!==x?(y=t.jsxs("div",{children:[ge,t.jsx("input",{type:"date",value:x,onChange:pe,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e[49]=x,e[50]=y):y=e[50];let j;e[51]!==g||e[52]!==p||e[53]!==f||e[54]!==b||e[55]!==y?(j=t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4",children:[g,p,f,b,y]}),e[51]=g,e[52]=p,e[53]=f,e[54]=b,e[55]=y,e[56]=j):j=e[56];let N;e[57]!==_e?(N=t.jsx("button",{onClick:_e,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium",children:"Apply Filters"}),e[57]=_e,e[58]=N):N=e[58];let fe;e[59]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx("button",{onClick:$e,className:"px-6 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium",children:"Reset"}),e[59]=fe):fe=e[59];let v;e[60]!==N?(v=t.jsxs("div",{className:"flex gap-3",children:[N,fe]}),e[60]=N,e[61]=v):v=e[61];let w;e[62]!==j||e[63]!==v?(w=t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[J,j,v]}),e[62]=j,e[63]=v,e[64]=w):w=e[64];const Se=l.from||0;let _;e[65]!==Se?(_=t.jsx("span",{className:"text-white font-semibold",children:Se}),e[65]=Se,e[66]=_):_=e[66];const Ce=l.to||0;let S;e[67]!==Ce?(S=t.jsx("span",{className:"text-white font-semibold",children:Ce}),e[67]=Ce,e[68]=S):S=e[68];let C;e[69]!==l.total?(C=t.jsx("span",{className:"text-white font-semibold",children:l.total}),e[69]=l.total,e[70]=C):C=e[70];let F;e[71]!==_||e[72]!==S||e[73]!==C?(F=t.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:t.jsxs("p",{className:"text-gray-400",children:["Showing ",_," to"," ",S," of"," ",C," fights"]})}),e[71]=_,e[72]=S,e[73]=C,e[74]=F):F=e[74];let be;e[75]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx("thead",{className:"bg-gray-900",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Fight #"}),t.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Fighters"}),t.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Odds"}),t.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Status"}),t.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Result"}),t.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Date"}),t.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold",children:"Actions"})]})}),e[75]=be):be=e[75];let R;if(e[76]!==l.data||e[77]!==P){let s;e[79]!==P?(s=a=>t.jsxs("tr",{className:"hover:bg-gray-750",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("span",{className:"text-xl font-bold",children:["#",a.fight_number]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("span",{className:"text-red-400",children:a.meron_fighter}),t.jsx("span",{className:"text-gray-500 text-xs",children:"VS"}),t.jsx("span",{className:"text-blue-400",children:a.wala_fighter})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex flex-col gap-1 text-sm",children:[t.jsxs("span",{className:"text-red-400",children:["M: ",a.meron_odds,"x"]}),t.jsxs("span",{className:"text-green-400",children:["D: ",a.draw_odds,"x"]}),t.jsxs("span",{className:"text-blue-400",children:["W: ",a.wala_odds,"x"]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${He(a.status)}`,children:a.status.toUpperCase()})}),t.jsx("td",{className:"px-6 py-4",children:a.result?t.jsx("span",{className:`font-bold text-lg ${Me(a.result)}`,children:a.result.toUpperCase()}):t.jsx("span",{className:"text-gray-500",children:"---"})}),t.jsxs("td",{className:"px-6 py-4 text-sm text-gray-400",children:[new Date(a.created_at).toLocaleDateString(),t.jsx("br",{}),new Date(a.created_at).toLocaleTimeString()]}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>Fe.visit(`/admin/fights/${a.id}`),className:"px-4 py-2 bg-blue-700 hover:bg-blue-600 rounded-lg text-sm",children:"View Details"}),a.status==="result_declared"&&t.jsx("button",{onClick:()=>P(a),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 rounded-lg text-sm",children:"Change Result"})]})})]},a.id),e[79]=P,e[80]=s):s=e[80],R=l.data.map(s),e[76]=l.data,e[77]=P,e[78]=R}else R=e[78];let k;e[81]!==R?(k=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[be,t.jsx("tbody",{className:"divide-y divide-gray-700",children:R})]})}),e[81]=R,e[82]=k):k=e[82];let D;e[83]!==l.data.length?(D=l.data.length===0&&t.jsxs("div",{className:"text-center py-12 text-gray-400",children:[t.jsx("div",{className:"text-6xl mb-4",children:"üìã"}),t.jsx("p",{className:"text-xl font-medium mb-2",children:"No fights found"}),t.jsx("p",{className:"text-sm",children:"Try adjusting your filters"})]}),e[83]=l.data.length,e[84]=D):D=e[84];let A;e[85]!==k||e[86]!==D?(A=t.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[k,D]}),e[85]=k,e[86]=D,e[87]=A):A=e[87];let T;e[88]!==l.current_page||e[89]!==l.from||e[90]!==l.last_page||e[91]!==l.links||e[92]!==l.to||e[93]!==l.total?(T=t.jsx(Ve,{currentPage:l.current_page,lastPage:l.last_page,from:l.from,to:l.to,total:l.total,links:l.links}),e[88]=l.current_page,e[89]=l.from,e[90]=l.last_page,e[91]=l.links,e[92]=l.to,e[93]=l.total,e[94]=T):T=e[94];let L;e[95]!==w||e[96]!==F||e[97]!==A||e[98]!==T?(L=t.jsxs("div",{className:"p-8",children:[I,w,F,A,T]}),e[95]=w,e[96]=F,e[97]=A,e[98]=T,e[99]=L):L=e[99];let E;e[100]!==h||e[101]!==H||e[102]!==u||e[103]!==we||e[104]!==W||e[105]!==r||e[106]!==n||e[107]!==je?(E=je&&r&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[t.jsxs("h2",{className:"text-2xl font-bold text-white mb-4",children:["Change Result - Fight #",r.fight_number]}),t.jsxs("div",{className:"mb-4 p-4 bg-gray-700 rounded",children:[t.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Current Result"}),t.jsx("p",{className:`font-bold text-xl ${Me(r.result||"")}`,children:r.result?.toUpperCase()||"N/A"})]}),t.jsxs("form",{onSubmit:we,children:[t.jsxs("div",{className:"mb-4",children:[t.jsxs("label",{className:"block text-white font-medium mb-2",children:["New Result ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:H.new_result,onChange:s=>n("new_result",s.target.value),className:"w-full px-4 py-2 bg-gray-700 text-white rounded-lg focus:ring-2 focus:ring-yellow-500",required:!0,children:[t.jsx("option",{value:"",children:"Select new result..."}),t.jsx("option",{value:"meron",children:"MERON"}),t.jsx("option",{value:"wala",children:"WALA"}),t.jsx("option",{value:"draw",children:"DRAW"}),t.jsx("option",{value:"cancelled",children:"CANCELLED"})]}),u.new_result&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.new_result})]}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("label",{className:"block text-white font-medium mb-2",children:["Reason ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{value:H.reason,onChange:s=>n("reason",s.target.value),className:"w-full px-4 py-2 bg-gray-700 text-white rounded-lg focus:ring-2 focus:ring-yellow-500",rows:4,placeholder:"Explain why the result is being changed...",maxLength:500,required:!0}),u.reason&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:u.reason}),t.jsxs("p",{className:"text-gray-400 text-xs mt-1",children:[H.reason.length,"/500 characters"]})]}),t.jsx("div",{className:"mb-4 p-4 bg-yellow-900 bg-opacity-30 border border-yellow-600 rounded",children:t.jsxs("p",{className:"text-yellow-400 text-sm",children:["‚ö†Ô∏è ",t.jsx("strong",{children:"Warning:"})," This will recalculate all payouts for this fight. This action is logged."]})}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{type:"submit",disabled:W,className:"flex-1 px-4 py-2 bg-yellow-600 hover:bg-yellow-500 disabled:bg-gray-600 disabled:cursor-not-allowed rounded-lg font-medium",children:W?"Changing...":"Change Result"}),t.jsx("button",{type:"button",onClick:h,disabled:W,className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 disabled:cursor-not-allowed rounded-lg font-medium",children:"Cancel"})]})]})]})}),e[100]=h,e[101]=H,e[102]=u,e[103]=we,e[104]=W,e[105]=r,e[106]=n,e[107]=je,e[108]=E):E=e[108];let ye;return e[109]!==L||e[110]!==E?(ye=t.jsxs(Ue,{children:[G,L,E]}),e[109]=L,e[110]=E,e[111]=ye):ye=e[111],ye}function qe(M){switch(M){case"meron":return"text-red-400";case"wala":return"text-blue-400";case"draw":return"text-green-400";case"cancelled":return"text-yellow-400";default:return"text-gray-400"}}function ze(M){switch(M){case"standby":return"bg-gray-600";case"open":return"bg-green-600";case"lastcall":return"bg-yellow-600";case"closed":return"bg-red-600";case"result_declared":return"bg-blue-600";case"cancelled":return"bg-gray-500";default:return"bg-gray-600"}}export{Ke as default};
