import{r as s,j as e,H as p}from"./app-VHKp5vtx.js";import{T as g}from"./teller-layout-BXqoR-KJ.js";import"./app-Ci97OsRT.js";function N(){const[n,l]=s.useState(!1),[a,i]=s.useState(null),[o,r]=s.useState("Not connected"),[c,d]=s.useState(!0);s.useEffect(()=>{localStorage.getItem("thermal_printer_id")&&r("Previously connected printer saved")},[]);const m=async()=>{try{r("Requesting Bluetooth device...");const t=await navigator.bluetooth.requestDevice({filters:[{name:"PT-210"},{namePrefix:"PT"},{namePrefix:"Printer"},{namePrefix:"BlueTooth Printer"},{namePrefix:"Thermal"},{namePrefix:"RPP"},{namePrefix:"POS"}],optionalServices:["000018f0-0000-1000-8000-00805f9b34fb","0000ff00-0000-1000-8000-00805f9b34fb"]});r(`Connecting to ${t.name}...`),await t.gatt?.connect()&&(i(t),l(!0),r(`Connected to ${t.name}`),c&&t.id&&(localStorage.setItem("thermal_printer_id",t.id),localStorage.setItem("thermal_printer_name",t.name||"Thermal Printer")),t.addEventListener("gattserverdisconnected",()=>{l(!1),r("Printer disconnected")}))}catch(t){console.error("Bluetooth connection error:",t),r(`Error: ${t.message}`)}},x=()=>{a?.gatt?.connected&&a.gatt.disconnect(),i(null),l(!1),r("Disconnected")},h=async()=>{if(!a?.gatt?.connected){alert("Printer not connected!");return}try{r("Printing test receipt...");const t=["\x1B@","\x1Ba",`================================
`,`Sabing2m Test Receipt
`,`================================
`,"\x1Ba\0",`Printer: ${a.name}
`,`Status: Connected
`,`Time: ${new Date().toLocaleString()}
`,`================================
`,`Compatible Printers:
`,`- PT-210
`,`- POS Thermal Printers
`,`- ESC/POS Compatible
`,`================================
`,`


`,"VA\0"].join("");r("Test print sent (implementation varies by printer model)"),alert("Test print command sent! Check your printer.")}catch(t){r(`Print error: ${t.message}`)}},b=()=>{localStorage.removeItem("thermal_printer_id"),localStorage.removeItem("thermal_printer_name"),r("Saved device cleared")};return e.jsxs(g,{children:[e.jsx(p,{title:"Printer Settings"}),e.jsxs("div",{className:"p-4 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4 mb-4 border border-gray-700",children:[e.jsx("h1",{className:"text-2xl font-bold text-orange-500",children:"Printer Settings"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Connect to Bluetooth Thermal Printer"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Compatible: PT-210, POS Printers, ESC/POS Thermal Printers"})]}),e.jsx("div",{className:`rounded-lg p-6 mb-4 border ${n?"bg-green-900/30 border-green-500/30":"bg-red-900/30 border-red-500/30"}`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-5xl",children:n?"üñ®Ô∏è‚úÖ":"üñ®Ô∏è‚ùå"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold mb-1 text-white",children:n?"Printer Connected":"Printer Not Connected"}),e.jsx("div",{className:"text-sm text-gray-300",children:o})]})]})}),e.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-6 mb-4 border border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Connection"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:t=>d(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{className:"text-white",children:"Remember this printer"})]}),e.jsx("p",{className:"text-sm text-gray-400 mt-1 ml-7",children:"Automatically reconnect to this printer next time"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:x,className:"w-full sm:w-auto px-4 sm:px-6 py-3 bg-red-600 hover:bg-red-700 rounded-lg font-bold text-base sm:text-lg",children:"Disconnect"}),e.jsx("button",{onClick:h,className:"w-full sm:w-auto px-4 sm:px-6 py-3 bg-green-600 hover:bg-green-700 rounded-lg font-bold text-base sm:text-lg",children:"üñ®Ô∏è Test Print"})]}):e.jsx("button",{onClick:m,className:"w-full sm:w-auto px-4 sm:px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-bold text-base sm:text-lg",children:"üîó Connect to Printer"}),e.jsx("button",{onClick:b,className:"w-full sm:w-auto px-4 sm:px-6 py-3 bg-gray-600 hover:bg-gray-700 rounded-lg font-bold text-base sm:text-lg",children:"Clear Saved Device"})]})]}),e.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-6 mb-4 border border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold text-orange-500 mb-4",children:"Receipt Preview"}),e.jsxs("div",{className:"bg-white text-black p-6 rounded font-mono text-sm max-w-md",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("div",{className:"font-bold text-lg",children:"Sabing2m Arena"}),e.jsx("div",{className:"text-xs",children:"BET RECEIPT"}),e.jsx("div",{className:"border-t border-b border-black my-2 py-1",children:e.jsx("div",{className:"font-bold",children:"TICKET #12345"})})]}),e.jsxs("div",{className:"space-y-1 mb-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fight:"}),e.jsx("span",{className:"font-bold",children:"#42"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Side:"}),e.jsx("span",{className:"font-bold",children:"MERON"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Amount:"}),e.jsx("span",{className:"font-bold",children:"‚Ç±500.00"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Odds:"}),e.jsx("span",{className:"font-bold",children:"1.57x"})]})]}),e.jsx("div",{className:"border-t border-black pt-2 mb-3",children:e.jsxs("div",{className:"flex justify-between font-bold text-base",children:[e.jsx("span",{children:"Potential Win:"}),e.jsx("span",{children:"‚Ç±785.00"})]})}),e.jsxs("div",{className:"text-xs text-center border-t border-black pt-2",children:[e.jsx("div",{children:new Date().toLocaleString()}),e.jsx("div",{className:"mt-2",children:"Good Luck!"})]})]}),e.jsx("p",{className:"text-sm text-gray-400 mt-4",children:"This receipt will be printed automatically after each bet placement"})]}),e.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-600/50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-yellow-400 mb-3",children:"‚ö†Ô∏è Important Notes"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-300",children:[e.jsx("li",{children:"‚Ä¢ Make sure Bluetooth is enabled on your device"}),e.jsx("li",{children:"‚Ä¢ The PT-210 printer must be turned on and in pairing mode"}),e.jsx("li",{children:"‚Ä¢ Keep the printer within Bluetooth range (approximately 10 meters)"}),e.jsx("li",{children:"‚Ä¢ Receipts will print automatically after each bet is placed"}),e.jsx("li",{children:"‚Ä¢ This feature requires a browser with Web Bluetooth API support (Chrome/Edge recommended)"})]})]})]})]})}export{N as default};
