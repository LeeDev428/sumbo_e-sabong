import{c as tt,r as He,j as s,b as st,a as Ue,H as lt}from"./app-Bn285p6Y.js";import{D as rt}from"./declarator-layout-MraT6JNe.js";import"./app-DbUdHGla.js";function bt(n){const e=tt.c(196),{fight:l}=n;let ne;e[0]===Symbol.for("react.memo_cache_sentinel")?(ne=[],e[0]=ne):ne=e[0];const[,Ze]=He.useState(ne);let oe;e[1]===Symbol.for("react.memo_cache_sentinel")?(oe=[],e[1]=oe):oe=e[1];const[o,et]=He.useState(oe);let i;e[2]!==l.meron_odds?(i=l.meron_odds?.toString()||"1.5",e[2]=l.meron_odds,e[3]=i):i=e[3];let d;e[4]!==l.wala_odds?(d=l.wala_odds?.toString()||"2.0",e[4]=l.wala_odds,e[5]=d):d=e[5];let c;e[6]!==l.draw_odds?(c=l.draw_odds?.toString()||"9.0",e[6]=l.draw_odds,e[7]=c):c=e[7];const Ie=l.auto_odds||!1,Ve=l.scheduled_at||"",ze=l.notes||"",Ge=l.venue||"",Je=l.event_name||"",Ke=l.event_date||"";let m;e[8]!==l.commission_percentage?(m=l.commission_percentage?.toString()||"7.5",e[8]=l.commission_percentage,e[9]=m):m=e[9];let u;e[10]!==l.round_number?(u=l.round_number?.toString()||"",e[10]=l.round_number,e[11]=u):u=e[11];const Pe=l.match_type||"regular",Qe=l.special_conditions||"";let g;e[12]!==l.revolving_funds?(g=l.revolving_funds?.toString()||"0",e[12]=l.revolving_funds,e[13]=g):g=e[13];let ie;e[14]!==l.meron_fighter||e[15]!==l.wala_fighter||e[16]!==Je||e[17]!==Ke||e[18]!==m||e[19]!==u||e[20]!==Pe||e[21]!==Qe||e[22]!==g||e[23]!==i||e[24]!==d||e[25]!==c||e[26]!==Ie||e[27]!==Ve||e[28]!==ze||e[29]!==Ge?(ie={meron_fighter:l.meron_fighter,wala_fighter:l.wala_fighter,meron_odds:i,wala_odds:d,draw_odds:c,auto_odds:Ie,scheduled_at:Ve,notes:ze,venue:Ge,event_name:Je,event_date:Ke,commission_percentage:m,round_number:u,match_type:Pe,special_conditions:Qe,revolving_funds:g},e[14]=l.meron_fighter,e[15]=l.wala_fighter,e[16]=Je,e[17]=Ke,e[18]=m,e[19]=u,e[20]=Pe,e[21]=Qe,e[22]=g,e[23]=i,e[24]=d,e[25]=c,e[26]=Ie,e[27]=Ve,e[28]=ze,e[29]=Ge,e[30]=ie):ie=e[30];const[t,a]=He.useState(ie);let de;e[31]!==l?(de=()=>{console.log("Fight data:",l),console.log("Teller cash assignments:",l.tellerCashAssignments),console.log("Teller cash assignments (snake):",l.teller_cash_assignments),st.get("/admin/api/tellers").then(ae=>Ze(ae.data)).catch(mt);const r=l.tellerCashAssignments||l.teller_cash_assignments;if(r&&r.length>0){const ae=r.map(ct);console.log("Mapped assignments:",ae),et(ae)}},e[31]=l,e[32]=de):de=e[32];let ce;e[33]===Symbol.for("react.memo_cache_sentinel")?(ce=[],e[33]=ce):ce=e[33],He.useEffect(de,ce);let me;e[34]!==o?(me=()=>o.reduce(dt,0),e[34]=o,e[35]=me):me=e[35];const f=me;let ue;e[36]!==t.revolving_funds||e[37]!==f?(ue=()=>parseFloat(t.revolving_funds||"0")-f(),e[36]=t.revolving_funds,e[37]=f,e[38]=ue):ue=e[38];const Xe=ue;let ge;e[39]!==l.id||e[40]!==t||e[41]!==Xe||e[42]!==f||e[43]!==o?(ge=r=>{if(r.preventDefault(),Xe()<0){alert(`Total assignments (â‚±${f().toLocaleString()}) exceed revolving funds (â‚±${parseFloat(t.revolving_funds).toLocaleString()})`);return}Ue.put(`/declarator/fights/${l.id}`,{...t,teller_assignments:o.filter(it)},{onSuccess:ot})},e[39]=l.id,e[40]=t,e[41]=Xe,e[42]=f,e[43]=o,e[44]=ge):ge=e[44];const Ye=ge;let fe;e[45]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx(lt,{title:"Edit Fight - Declarator"}),e[45]=fe):fe=e[45];let b;e[46]!==l.fight_number?(b=s.jsxs("h1",{className:"text-3xl font-bold",children:["Edit Fight #",l.fight_number]}),e[46]=l.fight_number,e[47]=b):b=e[47];let be;e[48]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx("p",{className:"text-gray-400",children:"Update fight details"}),e[48]=be):be=e[48];let h;e[49]!==b?(h=s.jsxs("div",{children:[b,be]}),e[49]=b,e[50]=h):h=e[50];let he;e[51]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx("button",{onClick:nt,className:"px-6 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold",children:"â† Back to Declared"}),e[51]=he):he=e[51];let _;e[52]!==h?(_=s.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[h,he]}),e[52]=h,e[53]=_):_=e[53];let _e;e[54]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Fight Number"}),e[54]=_e):_e=e[54];let p;e[55]!==l.fight_number?(p=s.jsxs("div",{children:[_e,s.jsx("input",{type:"number",value:l.fight_number,readOnly:!0,className:"w-full px-4 py-2 bg-gray-600 border border-gray-600 rounded-lg text-gray-300 cursor-not-allowed"})]}),e[55]=l.fight_number,e[56]=p):p=e[56];let pe;e[57]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Scheduled Date/Time"}),e[57]=pe):pe=e[57];let x;e[58]!==t?(x=r=>a({...t,scheduled_at:r.target.value}),e[58]=t,e[59]=x):x=e[59];let y;e[60]!==t.scheduled_at||e[61]!==x?(y=s.jsxs("div",{children:[pe,s.jsx("input",{type:"datetime-local",value:t.scheduled_at,onChange:x,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e[60]=t.scheduled_at,e[61]=x,e[62]=y):y=e[62];let v;e[63]!==p||e[64]!==y?(v=s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p,y]}),e[63]=p,e[64]=y,e[65]=v):v=e[65];let xe;e[66]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx("label",{className:"block text-sm font-medium mb-2 text-red-400",children:"MERON Fighter"}),e[66]=xe):xe=e[66];let j;e[67]!==t?(j=r=>a({...t,meron_fighter:r.target.value}),e[67]=t,e[68]=j):j=e[68];let N;e[69]!==t.meron_fighter||e[70]!==j?(N=s.jsxs("div",{children:[xe,s.jsx("input",{type:"text",value:t.meron_fighter,onChange:j,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Fighter name",required:!0})]}),e[69]=t.meron_fighter,e[70]=j,e[71]=N):N=e[71];let ye;e[72]===Symbol.for("react.memo_cache_sentinel")?(ye=s.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-400",children:"WALA Fighter"}),e[72]=ye):ye=e[72];let w;e[73]!==t?(w=r=>a({...t,wala_fighter:r.target.value}),e[73]=t,e[74]=w):w=e[74];let S;e[75]!==t.wala_fighter||e[76]!==w?(S=s.jsxs("div",{children:[ye,s.jsx("input",{type:"text",value:t.wala_fighter,onChange:w,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Fighter name",required:!0})]}),e[75]=t.wala_fighter,e[76]=w,e[77]=S):S=e[77];let C;e[78]!==N||e[79]!==S?(C=s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[N,S]}),e[78]=N,e[79]=S,e[80]=C):C=e[80];let ve;e[81]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx("label",{className:"block text-sm font-medium mb-2 text-red-400",children:"MERON Odds"}),e[81]=ve):ve=e[81];let k;e[82]!==t?(k=r=>a({...t,meron_odds:r.target.value}),e[82]=t,e[83]=k):k=e[83];let F;e[84]!==t.auto_odds||e[85]!==t.meron_odds||e[86]!==k?(F=s.jsxs("div",{children:[ve,s.jsx("input",{type:"number",step:"0.01",value:t.meron_odds,onChange:k,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",disabled:t.auto_odds})]}),e[84]=t.auto_odds,e[85]=t.meron_odds,e[86]=k,e[87]=F):F=e[87];let je;e[88]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx("label",{className:"block text-sm font-medium mb-2 text-green-400",children:"DRAW Odds"}),e[88]=je):je=e[88];let A;e[89]!==t?(A=r=>a({...t,draw_odds:r.target.value}),e[89]=t,e[90]=A):A=e[90];let D;e[91]!==t.auto_odds||e[92]!==t.draw_odds||e[93]!==A?(D=s.jsxs("div",{children:[je,s.jsx("input",{type:"number",step:"0.01",value:t.draw_odds,onChange:A,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:t.auto_odds})]}),e[91]=t.auto_odds,e[92]=t.draw_odds,e[93]=A,e[94]=D):D=e[94];let Ne;e[95]===Symbol.for("react.memo_cache_sentinel")?(Ne=s.jsx("label",{className:"block text-sm font-medium mb-2 text-blue-400",children:"WALA Odds"}),e[95]=Ne):Ne=e[95];let E;e[96]!==t?(E=r=>a({...t,wala_odds:r.target.value}),e[96]=t,e[97]=E):E=e[97];let T;e[98]!==t.auto_odds||e[99]!==t.wala_odds||e[100]!==E?(T=s.jsxs("div",{children:[Ne,s.jsx("input",{type:"number",step:"0.01",value:t.wala_odds,onChange:E,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:t.auto_odds})]}),e[98]=t.auto_odds,e[99]=t.wala_odds,e[100]=E,e[101]=T):T=e[101];let R;e[102]!==F||e[103]!==D||e[104]!==T?(R=s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[F,D,T]}),e[102]=F,e[103]=D,e[104]=T,e[105]=R):R=e[105];let O;e[106]!==t?(O=r=>a({...t,auto_odds:r.target.checked}),e[106]=t,e[107]=O):O=e[107];let L;e[108]!==t.auto_odds||e[109]!==O?(L=s.jsx("input",{type:"checkbox",checked:t.auto_odds,onChange:O,className:"w-4 h-4 rounded border-gray-600 bg-gray-700"}),e[108]=t.auto_odds,e[109]=O,e[110]=L):L=e[110];let we;e[111]===Symbol.for("react.memo_cache_sentinel")?(we=s.jsx("label",{className:"ml-2 text-sm",children:"Auto-calculate odds based on bet amounts"}),e[111]=we):we=e[111];let M;e[112]!==L?(M=s.jsxs("div",{className:"flex items-center",children:[L,we]}),e[112]=L,e[113]=M):M=e[113];let W;e[114]!==v||e[115]!==C||e[116]!==R||e[117]!==M?(W=s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 space-y-4",children:[v,C,R,M]}),e[114]=v,e[115]=C,e[116]=R,e[117]=M,e[118]=W):W=e[118];let Se;e[119]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsx("h3",{className:"text-xl font-bold text-orange-500 mb-4",children:"ðŸ“º Big Screen Display Information"}),e[119]=Se):Se=e[119];let Ce;e[120]===Symbol.for("react.memo_cache_sentinel")?(Ce=s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Event Name"}),e[120]=Ce):Ce=e[120];let $;e[121]!==t?($=r=>a({...t,event_name:r.target.value}),e[121]=t,e[122]=$):$=e[122];let q;e[123]!==t.event_name||e[124]!==$?(q=s.jsxs("div",{children:[Ce,s.jsx("input",{type:"text",value:t.event_name,onChange:$,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., Derby Championship 2026"})]}),e[123]=t.event_name,e[124]=$,e[125]=q):q=e[125];let ke;e[126]===Symbol.for("react.memo_cache_sentinel")?(ke=s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Event Date"}),e[126]=ke):ke=e[126];let B;e[127]!==t?(B=r=>a({...t,event_date:r.target.value}),e[127]=t,e[128]=B):B=e[128];let H;e[129]!==t.event_date||e[130]!==B?(H=s.jsxs("div",{children:[ke,s.jsx("input",{type:"date",value:t.event_date,onChange:B,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e[129]=t.event_date,e[130]=B,e[131]=H):H=e[131];let U;e[132]!==q||e[133]!==H?(U=s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[q,H]}),e[132]=q,e[133]=H,e[134]=U):U=e[134];let Fe;e[135]===Symbol.for("react.memo_cache_sentinel")?(Fe=s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Venue"}),e[135]=Fe):Fe=e[135];let I;e[136]!==t?(I=r=>a({...t,venue:r.target.value}),e[136]=t,e[137]=I):I=e[137];let V;e[138]!==t.venue||e[139]!==I?(V=s.jsxs("div",{children:[Fe,s.jsx("input",{type:"text",value:t.venue,onChange:I,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., Manila Cockpit Arena"})]}),e[138]=t.venue,e[139]=I,e[140]=V):V=e[140];let Ae;e[141]===Symbol.for("react.memo_cache_sentinel")?(Ae=s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Commission %"}),e[141]=Ae):Ae=e[141];let z;e[142]!==t?(z=r=>a({...t,commission_percentage:r.target.value}),e[142]=t,e[143]=z):z=e[143];let G;e[144]!==t.commission_percentage||e[145]!==z?(G=s.jsxs("div",{children:[Ae,s.jsx("input",{type:"number",step:"0.1",value:t.commission_percentage,onChange:z,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"7.5"})]}),e[144]=t.commission_percentage,e[145]=z,e[146]=G):G=e[146];let J;e[147]!==V||e[148]!==G?(J=s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[V,G]}),e[147]=V,e[148]=G,e[149]=J):J=e[149];let De;e[150]===Symbol.for("react.memo_cache_sentinel")?(De=s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Round Number"}),e[150]=De):De=e[150];let K;e[151]!==t?(K=r=>a({...t,round_number:r.target.value}),e[151]=t,e[152]=K):K=e[152];let P;e[153]!==t.round_number||e[154]!==K?(P=s.jsxs("div",{children:[De,s.jsx("input",{type:"number",value:t.round_number,onChange:K,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., 1, 2, 3..."})]}),e[153]=t.round_number,e[154]=K,e[155]=P):P=e[155];let Ee;e[156]===Symbol.for("react.memo_cache_sentinel")?(Ee=s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Match Type"}),e[156]=Ee):Ee=e[156];let Q;e[157]!==t?(Q=r=>a({...t,match_type:r.target.value}),e[157]=t,e[158]=Q):Q=e[158];let Te,Re,Oe,Le,Me;e[159]===Symbol.for("react.memo_cache_sentinel")?(Te=s.jsx("option",{value:"regular",children:"Regular"}),Re=s.jsx("option",{value:"derby",children:"Derby"}),Oe=s.jsx("option",{value:"tournament",children:"Tournament"}),Le=s.jsx("option",{value:"championship",children:"Championship"}),Me=s.jsx("option",{value:"special",children:"Special Event"}),e[159]=Te,e[160]=Re,e[161]=Oe,e[162]=Le,e[163]=Me):(Te=e[159],Re=e[160],Oe=e[161],Le=e[162],Me=e[163]);let X;e[164]!==t.match_type||e[165]!==Q?(X=s.jsxs("div",{children:[Ee,s.jsxs("select",{value:t.match_type,onChange:Q,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[Te,Re,Oe,Le,Me]})]}),e[164]=t.match_type,e[165]=Q,e[166]=X):X=e[166];let Y;e[167]!==P||e[168]!==X?(Y=s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[P,X]}),e[167]=P,e[168]=X,e[169]=Y):Y=e[169];let We;e[170]===Symbol.for("react.memo_cache_sentinel")?(We=s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Fight Notes"}),e[170]=We):We=e[170];let Z;e[171]!==t?(Z=r=>a({...t,notes:r.target.value}),e[171]=t,e[172]=Z):Z=e[172];let ee;e[173]!==t.notes||e[174]!==Z?(ee=s.jsxs("div",{children:[We,s.jsx("textarea",{value:t.notes,onChange:Z,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",rows:3,placeholder:"Add any special notes about this fight (visible on big screen)"})]}),e[173]=t.notes,e[174]=Z,e[175]=ee):ee=e[175];let $e;e[176]===Symbol.for("react.memo_cache_sentinel")?($e=s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Special Conditions"}),e[176]=$e):$e=e[176];let te;e[177]!==t?(te=r=>a({...t,special_conditions:r.target.value}),e[177]=t,e[178]=te):te=e[178];let se;e[179]!==t.special_conditions||e[180]!==te?(se=s.jsxs("div",{children:[$e,s.jsx("textarea",{value:t.special_conditions,onChange:te,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",rows:2,placeholder:"e.g., Weather conditions, special rules, etc."})]}),e[179]=t.special_conditions,e[180]=te,e[181]=se):se=e[181];let le;e[182]!==U||e[183]!==J||e[184]!==Y||e[185]!==ee||e[186]!==se?(le=s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 space-y-4",children:[Se,U,J,Y,ee,se]}),e[182]=U,e[183]=J,e[184]=Y,e[185]=ee,e[186]=se,e[187]=le):le=e[187];let qe;e[188]===Symbol.for("react.memo_cache_sentinel")?(qe=s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{type:"submit",className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold",children:"Update Fight"}),s.jsx("button",{type:"button",onClick:at,className:"px-6 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold",children:"Cancel"})]}),e[188]=qe):qe=e[188];let re;e[189]!==Ye||e[190]!==W||e[191]!==le?(re=s.jsx("div",{className:"max-w-4xl",children:s.jsxs("form",{onSubmit:Ye,className:"space-y-6",children:[W,le,qe]})}),e[189]=Ye,e[190]=W,e[191]=le,e[192]=re):re=e[192];let Be;return e[193]!==_||e[194]!==re?(Be=s.jsxs(rt,{children:[fe,_,re]}),e[193]=_,e[194]=re,e[195]=Be):Be=e[195],Be}function at(){return Ue.visit("/declarator/declared")}function nt(){return Ue.visit("/declarator/declared")}function ot(){Ue.visit("/declarator/declared")}function it(n){return n.teller_id&&parseFloat(n.amount)>0}function dt(n,e){return n+parseFloat(e.amount||"0")}function ct(n){return{teller_id:n.teller_id.toString(),amount:n.assigned_amount.toString()}}function mt(n){return console.error("Error fetching tellers:",n)}export{bt as default};
