import{c as $,r as w,j as e,a as v,H as B}from"./app-Bn285p6Y.js";import{A as F}from"./admin-layout-C9mjZlSe.js";import"./app-DbUdHGla.js";function G(r){const t=$.c(17),{fights:c}=r,[l,h]=w.useState(null),[u,j]=w.useState(!1),[a,_]=w.useState("7.5"),C=A,S=P;let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=s=>{h(s),_(s.commission_percentage.toString()),j(!0)},t[0]=d):d=t[0];const T=d;let m;t[1]!==a||t[2]!==l?(m=()=>{l&&v.post(`/admin/bet-controls/${l.id}/commission`,{commission_percentage:parseFloat(a)},{preserveScroll:!0,onSuccess:()=>{j(!1),h(null)}})},t[1]=a,t[2]=l,t[3]=m):m=t[3];const N=m,E=L;let x,b;t[4]===Symbol.for("react.memo_cache_sentinel")?(x=e.jsx(B,{title:"Bet Controls"}),b=e.jsx("br",{}),t[4]=x,t[5]=b):(x=t[4],b=t[5]);let g;t[6]===Symbol.for("react.memo_cache_sentinel")?(g=e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Bet Controls"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Control which sides (Meron/Wala) can accept bets for balance management"})]}),t[6]=g):g=t[6];let n;t[7]!==c?(n=c.length===0?e.jsxs("div",{className:"bg-gray-800 rounded-lg p-12 text-center",children:[e.jsx("p",{className:"text-gray-400 text-lg",children:"No active fights available"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Fights that are in standby, open, or last call will appear here"})]}):e.jsx("div",{className:"space-y-4",children:c.map(s=>{const i=s.total_meron_bets+s.total_wala_bets,y=i>0?s.total_meron_bets/i*100:50,f=i>0?s.total_wala_bets/i*100:50;return e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-white",children:["Fight #",s.fight_number]}),e.jsxs("div",{className:"flex gap-3 mt-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold text-white ${E(s.status)}`,children:s.status.toUpperCase()}),e.jsxs("button",{onClick:()=>T(s),className:"px-3 py-1 bg-purple-600 hover:bg-purple-700 rounded-full text-xs font-semibold text-white",children:["Commission: ",s.commission_percentage,"%"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-gray-400 text-sm",children:"Total Pot"}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:["â‚±",i.toLocaleString()]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex h-12 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-red-600 flex items-center justify-center text-white font-bold transition-all",style:{width:`${y}%`},children:y>15&&`${y.toFixed(0)}%`}),e.jsx("div",{className:"bg-blue-600 flex items-center justify-center text-white font-bold transition-all",style:{width:`${f}%`},children:f>15&&`${f.toFixed(0)}%`})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`border-2 rounded-lg p-4 transition-all ${s.meron_betting_open?"border-red-600 bg-red-900/20":"border-gray-600 bg-gray-700/50"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-red-400 font-bold text-lg mb-1",children:"MERON"}),e.jsx("p",{className:"text-white font-semibold",children:s.meron_fighter}),e.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:["Odds: ",s.meron_odds||"N/A"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-gray-400 text-xs",children:"Total Bets"}),e.jsxs("div",{className:"text-white font-bold text-lg",children:["â‚±",s.total_meron_bets.toLocaleString()]})]})]}),e.jsx("button",{onClick:()=>C(s.id),className:`w-full py-3 rounded-lg font-bold transition-all ${s.meron_betting_open?"bg-red-600 hover:bg-red-700 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-300"}`,children:s.meron_betting_open?"âœ… ACCEPTING BETS":"ðŸ”’ BETTING CLOSED"}),!s.meron_betting_open&&e.jsx("p",{className:"text-yellow-400 text-xs mt-2 text-center",children:"âš ï¸ Tellers cannot bet on Meron"})]}),e.jsxs("div",{className:`border-2 rounded-lg p-4 transition-all ${s.wala_betting_open?"border-blue-600 bg-blue-900/20":"border-gray-600 bg-gray-700/50"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-400 font-bold text-lg mb-1",children:"WALA"}),e.jsx("p",{className:"text-white font-semibold",children:s.wala_fighter}),e.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:["Odds: ",s.wala_odds||"N/A"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-gray-400 text-xs",children:"Total Bets"}),e.jsxs("div",{className:"text-white font-bold text-lg",children:["â‚±",s.total_wala_bets.toLocaleString()]})]})]}),e.jsx("button",{onClick:()=>S(s.id),className:`w-full py-3 rounded-lg font-bold transition-all ${s.wala_betting_open?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-300"}`,children:s.wala_betting_open?"âœ… ACCEPTING BETS":"ðŸ”’ BETTING CLOSED"}),!s.wala_betting_open&&e.jsx("p",{className:"text-yellow-400 text-xs mt-2 text-center",children:"âš ï¸ Tellers cannot bet on Wala"})]})]})]},s.id)})}),t[7]=c,t[8]=n):n=t[8];let o;t[9]!==a||t[10]!==l||t[11]!==u||t[12]!==N?(o=u&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 max-w-md w-full mx-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Set Commission Percentage"}),e.jsxs("p",{className:"text-gray-400 mb-4",children:["Fight #",l.fight_number,": ",l.meron_fighter," vs ",l.wala_fighter]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Commission Percentage (%)"}),e.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:a,onChange:s=>_(s.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white text-lg"}),e.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"Default is 7.5%. This will be deducted from the total pot before payout."})]}),l.total_meron_bets+l.total_wala_bets>0&&e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4 mb-6 text-sm",children:[e.jsx("p",{className:"text-gray-400 mb-2",children:"Example with current pot:"}),e.jsxs("div",{className:"space-y-1 text-gray-300",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Pot:"}),e.jsxs("span",{className:"font-semibold",children:["â‚±",(l.total_meron_bets+l.total_wala_bets).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-purple-400",children:[e.jsxs("span",{children:["Commission (",a,"%):"]}),e.jsxs("span",{className:"font-semibold",children:["â‚±",((l.total_meron_bets+l.total_wala_bets)*(parseFloat(a)/100)).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-600 pt-1 mt-1",children:[e.jsx("span",{children:"Net Pot:"}),e.jsxs("span",{className:"font-semibold text-green-400",children:["â‚±",((l.total_meron_bets+l.total_wala_bets)*(1-parseFloat(a)/100)).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{j(!1),h(null)},className:"flex-1 px-4 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold",children:"Cancel"}),e.jsx("button",{onClick:N,className:"flex-1 px-4 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg font-semibold",children:"Update Commission"})]})]})}),t[9]=a,t[10]=l,t[11]=u,t[12]=N,t[13]=o):o=t[13];let p;return t[14]!==n||t[15]!==o?(p=e.jsxs(F,{children:[x,b,g,n,o]}),t[14]=n,t[15]=o,t[16]=p):p=t[16],p}function L(r){switch(r){case"standby":return"bg-gray-600";case"open":return"bg-green-600";case"lastcall":return"bg-yellow-600";default:return"bg-gray-600"}}function P(r){v.post(`/admin/bet-controls/${r}/toggle-wala`,{},{preserveScroll:!0})}function A(r){v.post(`/admin/bet-controls/${r}/toggle-meron`,{},{preserveScroll:!0})}export{G as default};
