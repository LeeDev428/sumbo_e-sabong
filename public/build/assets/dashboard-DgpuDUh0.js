import{c as J,r as b,j as s,a as U,H as K}from"./app-CbIbn4Ys.js";import{D as Q}from"./declarator-layout-Bl0m-ehw.js";import"./app-DYXMlGDN.js";function de(t){const e=J.c(49),{fights:B}=t,f=B===void 0?[]:B,[W,o]=b.useState(!1),[T,d]=b.useState(!1),[l,x]=b.useState(null),[a,n]=b.useState(null),[c,m]=b.useState(""),[i,g]=b.useState("");let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p=[],e[0]=p):p=e[0],b.useEffect(te,p);const I=f.filter(se),G=f.filter(ee).length;let y;e[1]!==a||e[2]!==l||e[3]!==n||e[4]!==x||e[5]!==o?(y=()=>{!l||!a||U.post("/declarator/results",{fight_id:l.id,result:a},{onSuccess:()=>{o(!1),x(null),n(null)}})},e[1]=a,e[2]=l,e[3]=n,e[4]=x,e[5]=o,e[6]=y):y=e[6];const O=y;let j;e[7]!==c||e[8]!==m||e[9]!==d||e[10]!==g||e[11]!==i?(j=()=>{!c||!i||U.post("/declarator/fights/create-next",{meron_fighter:c,wala_fighter:i},{onSuccess:()=>{d(!1),m(""),g("")}})},e[7]=c,e[8]=m,e[9]=d,e[10]=g,e[11]=i,e[12]=j):j=e[12];const z=j;let N,v;e[13]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx(K,{title:"Declarator Dashboard"}),v=s.jsx("br",{}),e[13]=N,e[14]=v):(N=e[13],v=e[14]);let _;e[15]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl lg:text-3xl font-bold",children:"Declarator Dashboard"}),s.jsx("p",{className:"text-sm lg:text-base text-gray-400",children:"Declare fight results and manage outcomes"})]}),e[15]=_):_=e[15];let w;e[16]!==d?(w=s.jsxs("div",{className:"mb-6 lg:mb-8 flex items-center justify-between",children:[_,s.jsx("button",{onClick:()=>d(!0),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold flex items-center gap-2",children:"âž• Next Fight"})]}),e[16]=d,e[17]=w):w=e[17];let S;e[18]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx("div",{className:"text-xs lg:text-sm text-gray-400 mb-2",children:"Pending Results"}),e[18]=S):S=e[18];let F;e[19]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Fights awaiting declaration"}),e[19]=F):F=e[19];let C;e[20]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx("div",{className:"text-xs lg:text-sm text-gray-400 mb-2",children:"Declared Today"}),e[20]=C):C=e[20];let D;e[21]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Results declared today"}),e[21]=D):D=e[21];let A;e[22]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx("div",{className:"text-xs lg:text-sm text-gray-400 mb-2",children:"Total Fights"}),e[22]=A):A=e[22];let R;e[23]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"All fight events"}),e[23]=R):R=e[23];let k;e[24]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsxs("div",{className:"p-4 lg:p-6 border-b border-gray-700",children:[s.jsx("h2",{className:"text-lg lg:text-xl font-bold",children:"Pending Declarations"}),s.jsx("p",{className:"text-xs lg:text-sm text-gray-400",children:"Fights with closed betting awaiting result declaration"})]}),e[24]=k):k=e[24];const H=I.length>0?s.jsx("div",{className:"space-y-4",children:I.map(r=>s.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 flex items-center justify-between hover:bg-gray-600 transition-colors",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsxs("span",{className:"font-bold text-lg",children:["Fight #",r.fight_number]}),s.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-yellow-600",children:"â±ï¸ AWAITING RESULT"})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm mb-2",children:[s.jsxs("span",{className:"text-red-400 font-medium",children:["MERON: ",r.meron_fighter," (",r.meron_odds||"N/A",")"]}),s.jsx("span",{className:"text-gray-500",children:"vs"}),s.jsxs("span",{className:"text-blue-400 font-medium",children:["WALA: ",r.wala_fighter," (",r.wala_odds||"N/A",")"]})]}),r.betting_closed_at&&s.jsxs("div",{className:"text-xs text-gray-500",children:["Betting closed: ",new Date(r.betting_closed_at).toLocaleString()]})]}),s.jsx("button",{onClick:()=>{x(r),o(!0)},className:"px-6 py-3 bg-green-600 hover:bg-green-700 rounded-lg font-semibold",children:"ðŸ† Declare Result"})]},r.id))}):s.jsx("div",{className:"text-center py-12 text-gray-400",children:"No pending declarations. All fights have been processed."});let E;e[25]!==H?(E=s.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700",children:[k,s.jsx("div",{className:"p-4 lg:p-6",children:H})]}),e[25]=H,e[26]=E):E=e[26];const V="mt-8 bg-gray-800 rounded-lg border border-gray-700";let h;e[27]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsxs("div",{className:"p-6 border-b border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Recent Declarations"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Latest declared fight results"})]}),e[27]=h):h=e[27];const q="p-6",P=f.filter(Z).length>0?s.jsx("div",{className:"space-y-3",children:f.filter(Y).slice(0,5).map(X)}):s.jsx("div",{className:"text-center py-8 text-gray-400",children:"No declared results yet"});let u;e[28]!==P?(u=s.jsx("div",{className:q,children:P}),e[28]=P,e[29]=u):u=e[29];let M;e[30]!==h||e[31]!==u?(M=s.jsxs("div",{className:V,children:[h,u]}),e[30]=h,e[31]=u,e[32]=M):M=e[32];let L;e[33]!==O||e[34]!==a||e[35]!==l||e[36]!==n||e[37]!==x||e[38]!==o||e[39]!==W?(L=W&&l&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full",children:[s.jsxs("div",{className:"p-6 border-b border-gray-700",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Declare Fight Result"}),s.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Fight #",l.fight_number,": ",l.meron_fighter," vs ",l.wala_fighter]})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[s.jsxs("button",{onClick:()=>n("meron"),className:`p-8 rounded-lg border-2 transition-all ${a==="meron"?"bg-red-600 border-red-400 scale-105":"bg-gray-700 border-gray-600 hover:border-red-400"}`,children:[s.jsx("div",{className:"text-3xl font-bold mb-2",children:"MERON"}),s.jsx("div",{className:"text-sm",children:l.meron_fighter}),s.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Odds: ",l.meron_odds||"N/A"]})]}),s.jsxs("button",{onClick:()=>n("wala"),className:`p-8 rounded-lg border-2 transition-all ${a==="wala"?"bg-blue-600 border-blue-400 scale-105":"bg-gray-700 border-gray-600 hover:border-blue-400"}`,children:[s.jsx("div",{className:"text-3xl font-bold mb-2",children:"WALA"}),s.jsx("div",{className:"text-sm",children:l.wala_fighter}),s.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Odds: ",l.wala_odds||"N/A"]})]}),s.jsxs("button",{onClick:()=>n("draw"),className:`p-8 rounded-lg border-2 transition-all ${a==="draw"?"bg-green-600 border-green-400 scale-105":"bg-gray-700 border-gray-600 hover:border-green-400"}`,children:[s.jsx("div",{className:"text-3xl font-bold mb-2",children:"DRAW"}),s.jsx("div",{className:"text-sm",children:"Match Draw"})]}),s.jsxs("button",{onClick:()=>n("cancelled"),className:`p-8 rounded-lg border-2 transition-all ${a==="cancelled"?"bg-gray-600 border-gray-400 scale-105":"bg-gray-700 border-gray-600 hover:border-gray-400"}`,children:[s.jsx("div",{className:"text-3xl font-bold mb-2",children:"CANCEL"}),s.jsx("div",{className:"text-sm",children:"Cancelled Fight"})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:O,disabled:!a,className:`flex-1 py-4 rounded-lg font-bold text-lg ${a?"bg-green-600 hover:bg-green-700":"bg-gray-600 cursor-not-allowed"}`,children:"âœ… Confirm Declaration"}),s.jsx("button",{onClick:()=>{o(!1),x(null),n(null)},className:"px-6 py-4 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold",children:"Cancel"})]})]})]})}),e[33]=O,e[34]=a,e[35]=l,e[36]=n,e[37]=x,e[38]=o,e[39]=W,e[40]=L):L=e[40];let $;return e[41]!==z||e[42]!==c||e[43]!==m||e[44]!==d||e[45]!==g||e[46]!==T||e[47]!==i?($=T&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full",children:[s.jsxs("div",{className:"p-6 border-b border-gray-700",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Create Next Fight"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Event settings will be auto-populated from the previous fight"})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Meron Fighter"}),s.jsx("input",{type:"text",value:c,onChange:r=>m(r.target.value),placeholder:"Enter Meron fighter name",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-red-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Wala Fighter"}),s.jsx("input",{type:"text",value:i,onChange:r=>g(r.target.value),placeholder:"Enter Wala fighter name",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-blue-500"})]}),s.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 text-sm text-gray-300",children:[s.jsx("p",{className:"font-semibold mb-2",children:"ðŸ“‹ Auto-populated settings:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:"Fight number (auto-incremented)"}),s.jsx("li",{children:"Venue, Event name, Event date"}),s.jsx("li",{children:"Commission percentage, Match type"}),s.jsx("li",{children:"Revolving funds, Teller assignments"}),s.jsx("li",{children:"Special conditions (if any)"})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:z,disabled:!c||!i,className:`flex-1 py-4 rounded-lg font-bold text-lg ${c&&i?"bg-blue-600 hover:bg-blue-700":"bg-gray-600 cursor-not-allowed"}`,children:"âž• Create Fight"}),s.jsx("button",{onClick:()=>{d(!1),m(""),g("")},className:"px-6 py-4 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold",children:"Cancel"})]})]})]})}),e[41]=z,e[42]=c,e[43]=m,e[44]=d,e[45]=g,e[46]=T,e[47]=i,e[48]=$):$=e[48],s.jsxs(Q,{children:[N,v,w,s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6 mb-6 lg:mb-8",children:[s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 lg:p-6 border border-gray-700",children:[S,s.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-yellow-400",children:I.length}),F]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 lg:p-6 border border-gray-700",children:[C,s.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-green-400",children:G}),D]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 lg:p-6 border border-gray-700",children:[A,s.jsx("div",{className:"text-3xl lg:text-4xl font-bold",children:f.length}),R]})]}),E,M,L,$]})}function X(t){return s.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("span",{className:"font-semibold",children:["Fight #",t.fight_number]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${t.result==="meron"?"bg-red-600":t.result==="wala"?"bg-blue-600":t.result==="draw"?"bg-green-600":"bg-gray-600"}`,children:t.result?.toUpperCase()||"N/A"})]}),s.jsxs("div",{className:"text-sm text-gray-400",children:[t.meron_fighter," vs ",t.wala_fighter]})]}),t.declared_at&&s.jsx("div",{className:"text-xs text-gray-500",children:new Date(t.declared_at).toLocaleString()})]},t.id)}function Y(t){return t.result}function Z(t){return t.result}function ee(t){return t.declared_by}function se(t){return t.status==="betting_closed"}function te(){const t=setInterval(le,3e3);return()=>clearInterval(t)}function le(){U.reload({only:["fights"]})}export{de as default};
