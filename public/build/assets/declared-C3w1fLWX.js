import{r as x,u as Z,j as e,H as ee,a as m}from"./app-CXTbrIuM.js";import{D as se}from"./declarator-layout-BRu-mR3d.js";import"./app-uwIt0fpx.js";function ae({declared_fights:h=[],tellers:_=[]}){const[M,w]=x.useState(!1),[P,f]=x.useState(!1),[B,C]=x.useState(!1),[t,i]=x.useState(null),[u,L]=x.useState("7.5"),[T,S]=x.useState(null),[r,g]=x.useState({}),{data:b,setData:p,post:W,processing:k,errors:D}=Z({new_result:""}),j=h[0],y=j&&j.status==="result_declared"&&j.result&&j.result!=="",O=s=>{i(s),p("new_result",s.result),w(!0)},G=s=>{i(s),f(!0)},H=s=>{s.preventDefault(),t&&W(`/declarator/change-result/${t.id}`,{onSuccess:()=>{w(!1),i(null)}})},N=(s,l)=>{m.post(`/declarator/fights/${s}/status`,{status:l},{preserveScroll:!0,onSuccess:()=>{f(!1),i(null)}})},U=s=>{m.post(`/declarator/bet-controls/${s}/toggle-meron`,{},{preserveScroll:!0})},z=s=>{m.post(`/declarator/bet-controls/${s}/toggle-wala`,{},{preserveScroll:!0})},q=s=>{i(s),L(s.commission_percentage?.toString()||"7.5"),C(!0)},I=()=>{t&&m.post(`/declarator/bet-controls/${t.id}/commission`,{commission_percentage:parseFloat(u)},{preserveScroll:!0,onSuccess:()=>{C(!1),i(null)}})},Y=s=>{r[s.id]||g({...r,[s.id]:{revolving_funds:s.revolving_funds?.toString()||"0",assignments:s.teller_assignments?.map(l=>({teller_id:l.teller.id.toString(),amount:l.assigned_amount.toString()}))||[]}})},V=s=>{const l=r[s]||{revolving_funds:"0",assignments:[]};g({...r,[s]:{...l,assignments:[...l.assignments,{teller_id:"",amount:""}]}})},J=(s,l)=>{const n=r[s];n&&g({...r,[s]:{...n,assignments:n.assignments.filter((d,a)=>a!==l)}})},A=(s,l,n,d)=>{const a=r[s];if(!a)return;const o=[...a.assignments];if(n==="teller_id"&&d){const $=h?.find(F=>F.id===s)?.teller_cash_assignments?.find(F=>F.teller_id===parseInt(d));o[l]={...o[l],[n]:d,amount:$?$.current_balance.toString():"0"}}else o[l]={...o[l],[n]:d};g({...r,[s]:{...a,assignments:o}})},E=s=>{const l=r[s];return l?l.assignments.reduce((n,d)=>n+parseFloat(d.amount||"0"),0):0},v=s=>{const l=r[s];return l?parseFloat(l.revolving_funds||"0")-E(s):0},K=s=>{const l=r[s];if(!l)return;if(v(s)<0){alert("âš ï¸ Total assignments exceed revolving funds! Please adjust the amounts.");return}m.post(`/declarator/fights/${s}/update-funds`,{revolving_funds:l.revolving_funds,teller_assignments:l.assignments},{preserveScroll:!0,onSuccess:()=>{S(null)}})},R=s=>{switch(s){case"meron":return"bg-red-600";case"wala":return"bg-blue-600";case"draw":return"bg-green-600";case"cancelled":return"bg-gray-600";default:return"bg-purple-600"}},Q=s=>{switch(s){case"standby":return"bg-gray-600";case"open":return"bg-green-600";case"lastcall":return"bg-yellow-600";case"closed":return"bg-red-600";case"result_declared":return"bg-blue-600";case"cancelled":return"bg-gray-500";default:return"bg-gray-600"}},X=s=>{switch(s){case"standby":return"STANDBY";case"open":return"BETTING OPEN";case"lastcall":return"LAST CALL";case"closed":return"BETTING CLOSED";case"result_declared":return"RESULT DECLARED";case"cancelled":return"CANCELLED";default:return s.toUpperCase()}};return e.jsxs(se,{children:[e.jsx(ee,{title:"Declared Fights"}),e.jsxs("div",{className:"p-4 lg:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 lg:mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-white mb-2",children:"Declared Fights"}),e.jsx("p",{className:"text-sm lg:text-base text-gray-400",children:"View and manage declared fight results"})]}),e.jsx("button",{onClick:()=>{y&&m.post("/declarator/fights/create-next",{})},disabled:!y,className:`px-6 py-3 rounded-lg font-semibold flex items-center gap-2 ${y?"bg-blue-600 hover:bg-blue-700 cursor-pointer":"bg-gray-600 cursor-not-allowed opacity-50"}`,title:y?"Create next fight":"Latest fight must be closed and declared",children:"âž• Next Fight"})]}),e.jsxs("div",{className:"grid gap-4 lg:gap-6",children:[h.map(s=>{const l=(s.total_meron_bets||0)+(s.total_wala_bets||0),n=l>0?(s.total_meron_bets||0)/l*100:50,d=l>0?(s.total_wala_bets||0)/l*100:50;return e.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-8 hover:bg-gray-750 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-white",children:["#",s.fight_number]}),e.jsx("span",{className:`px-4 py-1 rounded-full text-sm font-medium ${Q(s.status)}`,children:X(s.status)}),s.result&&e.jsxs("span",{className:`px-4 py-1 rounded-full text-sm font-medium ${R(s.result)}`,children:["Result: ",s.result.toUpperCase()]}),s.commission_percentage!==void 0&&e.jsxs("button",{onClick:()=>q(s),className:"px-3 py-1 bg-purple-600 hover:bg-purple-700 rounded-full text-xs font-semibold text-white",children:["Commission: ",s.commission_percentage,"%"]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:`border rounded-lg p-4 ${s.result==="meron"?"bg-red-900/50 border-red-500":"bg-red-900/30 border-red-700"}`,children:[e.jsxs("div",{className:"text-xs text-red-300 mb-2",children:["MERON ",s.result==="meron"&&"ðŸ‘‘ WINNER"]}),e.jsx("div",{className:"font-bold text-white mb-2",children:s.meron_fighter}),e.jsxs("div",{className:"text-2xl font-bold text-red-400",children:[s.meron_odds||"---","x"]})]}),e.jsxs("div",{className:`border rounded-lg p-4 ${s.result==="draw"?"bg-green-900/50 border-green-500":"bg-green-900/30 border-green-700"}`,children:[e.jsxs("div",{className:"text-xs text-green-300 mb-2",children:["DRAW ",s.result==="draw"&&"ðŸ‘‘"]}),e.jsx("div",{className:"font-bold text-white mb-2",children:"Match Draw"}),e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[s.draw_odds||"---","x"]})]}),e.jsxs("div",{className:`border rounded-lg p-4 ${s.result==="wala"?"bg-blue-900/50 border-blue-500":"bg-blue-900/30 border-blue-700"}`,children:[e.jsxs("div",{className:"text-xs text-blue-300 mb-2",children:["WALA ",s.result==="wala"&&"ðŸ‘‘ WINNER"]}),e.jsx("div",{className:"font-bold text-white mb-2",children:s.wala_fighter}),e.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[s.wala_odds||"---","x"]})]}),e.jsxs("div",{className:"flex flex-col justify-center bg-gray-700/50 border border-gray-600 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Total Bets"}),e.jsx("div",{className:"text-xl font-bold text-white mb-3",children:s.total_bets}),e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Payouts"}),e.jsxs("div",{className:"text-lg font-bold text-green-400",children:["â‚±",s.total_payouts.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-400",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Created:"})," ",new Date(s.created_at).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Declared:"})," ",new Date(s.declared_at).toLocaleString()]})]}),e.jsx("div",{className:"mt-6 border-t border-gray-700 pt-6",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"ðŸ’° Funds & Teller Cash Distribution"}),T!==s.id?e.jsx("button",{onClick:()=>{Y(s),S(s.id)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm",children:"âœï¸ Edit Funds"}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>K(s.id),className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg text-sm",children:"ðŸ’¾ Save"}),e.jsx("button",{onClick:()=>S(null),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg text-sm",children:"Cancel"})]})]}),T===s.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-green-400",children:"Revolving Funds (â‚±)"}),e.jsx("input",{type:"number",step:"0.01",value:r[s.id]?.revolving_funds||"0",onChange:a=>g({...r,[s.id]:{...r[s.id],revolving_funds:a.target.value}}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 text-white",placeholder:"0.00"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Total funds available for teller assignments"})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Assign Cash to Tellers"}),e.jsx("button",{type:"button",onClick:()=>V(s.id),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm",children:"+ Add Teller"})]}),r[s.id]?.assignments?.length?e.jsx("div",{className:"space-y-3",children:r[s.id].assignments.map((a,o)=>e.jsxs("div",{className:"flex gap-3 items-end bg-gray-700 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Teller"}),e.jsxs("select",{value:a.teller_id,onChange:c=>A(s.id,o,"teller_id",c.target.value),className:"w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-sm text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Teller"}),_.map(c=>e.jsxs("option",{value:c.id,children:[c.name," (",c.email,")"]},c.id))]})]}),e.jsxs("div",{className:"w-40",children:[e.jsx("label",{className:"block text-xs font-medium mb-1",children:"Amount (â‚±)"}),e.jsx("input",{type:"number",step:"0.01",value:a.amount,onChange:c=>A(s.id,o,"amount",c.target.value),className:"w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-lg text-sm text-white",placeholder:"0.00",required:!0})]}),e.jsx("button",{type:"button",onClick:()=>J(s.id,o),className:"px-3 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm",children:"Remove"})]},o))}):e.jsx("p",{className:"text-gray-400 text-sm",children:'No tellers assigned yet. Click "Add Teller" to assign cash.'}),r[s.id]?.assignments?.length>0&&e.jsxs("div",{className:"mt-4 bg-gray-900 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Revolving Funds:"}),e.jsxs("span",{className:"text-white",children:["â‚±",parseFloat(r[s.id]?.revolving_funds||"0").toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Total Assigned:"}),e.jsxs("span",{className:"text-yellow-400",children:["â‚±",E(s.id).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-sm font-bold border-t border-gray-700 pt-2",children:[e.jsx("span",{children:"Remaining:"}),e.jsxs("span",{className:v(s.id)<0?"text-red-400":"text-green-400",children:["â‚±",v(s.id).toLocaleString()]})]}),v(s.id)<0&&e.jsx("p",{className:"text-red-400 text-xs mt-2",children:"âš ï¸ Total assignments exceed revolving funds!"})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Revolving Funds"}),e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["â‚±",(s.revolving_funds||0).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),s.teller_assignments&&s.teller_assignments.length>0?e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-400 mb-2",children:"Assigned Tellers"}),e.jsx("div",{className:"space-y-2",children:s.teller_assignments.map(a=>e.jsxs("div",{className:"bg-gray-800 p-3 rounded-lg flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:a.teller.name}),e.jsx("div",{className:"text-xs text-gray-400",children:a.teller.email})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Assigned"}),e.jsxs("div",{className:"font-bold text-yellow-400",children:["â‚±",a.assigned_amount.toLocaleString("en-PH",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Balance: â‚±",a.current_balance.toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]},a.id))})]}):e.jsx("div",{className:""})]})]})}),(s.status==="open"||s.status==="lastcall"||s.status==="standby")&&e.jsxs("div",{className:"mt-6 border-t border-gray-700 pt-6",children:[e.jsx("h4",{className:"text-lg font-bold text-white mb-4",children:"ðŸŽ® Bet Controls"}),l>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex h-10 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-red-600 flex items-center justify-center text-white font-bold transition-all text-sm",style:{width:`${n}%`},children:n>15&&`${n.toFixed(0)}%`}),e.jsx("div",{className:"bg-blue-600 flex items-center justify-center text-white font-bold transition-all text-sm",style:{width:`${d}%`},children:d>15&&`${d.toFixed(0)}%`})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`border-2 rounded-lg p-4 transition-all ${s.meron_betting_open?"border-red-600 bg-red-900/20":"border-gray-600 bg-gray-700/50"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-red-400 font-bold mb-1",children:"MERON"}),e.jsx("p",{className:"text-white text-sm font-semibold",children:s.meron_fighter})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-gray-400 text-xs",children:"Bets"}),e.jsxs("div",{className:"text-white font-bold",children:["â‚±",(s.total_meron_bets||0).toLocaleString()]})]})]}),e.jsx("button",{onClick:()=>U(s.id),className:`w-full py-2 rounded-lg font-bold transition-all text-sm ${s.meron_betting_open?"bg-red-600 hover:bg-red-700 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-300"}`,children:s.meron_betting_open?"âœ… ACCEPTING":"ðŸ”’ CLOSED"}),!s.meron_betting_open&&e.jsx("p",{className:"text-yellow-400 text-xs mt-2 text-center",children:"âš ï¸ Tellers cannot bet on Meron"})]}),e.jsxs("div",{className:`border-2 rounded-lg p-4 transition-all ${s.wala_betting_open?"border-blue-600 bg-blue-900/20":"border-gray-600 bg-gray-700/50"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-blue-400 font-bold mb-1",children:"WALA"}),e.jsx("p",{className:"text-white text-sm font-semibold",children:s.wala_fighter})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-gray-400 text-xs",children:"Bets"}),e.jsxs("div",{className:"text-white font-bold",children:["â‚±",(s.total_wala_bets||0).toLocaleString()]})]})]}),e.jsx("button",{onClick:()=>z(s.id),className:`w-full py-2 rounded-lg font-bold transition-all text-sm ${s.wala_betting_open?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-300"}`,children:s.wala_betting_open?"âœ… ACCEPTING":"ðŸ”’ CLOSED"}),!s.wala_betting_open&&e.jsx("p",{className:"text-yellow-400 text-xs mt-2 text-center",children:"âš ï¸ Tellers cannot bet on Wala"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 min-w-[160px]",children:[e.jsx("button",{onClick:()=>G(s),className:"px-4 py-2.5 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm font-medium whitespace-nowrap",children:"Change Status"}),e.jsx("button",{onClick:()=>m.visit(`/declarator/fights/${s.id}/edit`),className:"px-4 py-2.5 bg-blue-700 hover:bg-blue-600 rounded-lg text-sm font-medium whitespace-nowrap",children:"âœï¸ Edit Fight"}),s.status==="closed"&&!s.result&&e.jsx("button",{onClick:()=>m.visit("/declarator/pending"),className:"px-4 py-2.5 bg-green-700 hover:bg-green-600 rounded-lg text-sm font-medium whitespace-nowrap",children:"Declare Result"}),s.result&&e.jsx("button",{onClick:()=>O(s),className:"px-4 py-2.5 bg-yellow-700 hover:bg-yellow-600 rounded-lg text-sm font-medium whitespace-nowrap",children:"Change Result"})]})]})},s.id)}),h.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“‹"}),e.jsx("p",{className:"text-xl font-medium mb-2",children:"No declared fights yet"}),e.jsx("p",{className:"text-sm",children:"Declared fights will appear here"})]})]})]}),M&&t&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-700",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Change Result - Fight #",t.fight_number]}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-700 rounded",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Current Matchup:"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"text-red-400 font-semibold",children:t.meron_fighter}),e.jsx("span",{className:"text-gray-500",children:"vs"}),e.jsx("span",{className:"text-blue-400 font-semibold",children:t.wala_fighter})]}),e.jsxs("div",{className:"text-sm text-gray-400 mt-2",children:["Current Result: ",e.jsx("span",{className:`font-bold ${R(t.result)} px-2 py-0.5 rounded`,children:t.result.toUpperCase()})]})]}),e.jsxs("form",{onSubmit:H,children:[e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("button",{type:"button",onClick:()=>p("new_result","meron"),className:`w-full px-4 py-3 rounded-lg text-left font-medium transition-colors ${b.new_result==="meron"?"bg-red-600 ring-2 ring-red-400":"bg-red-800/50 hover:bg-red-700"}`,children:["ðŸ‘Š MERON - ",t.meron_fighter]}),e.jsxs("button",{type:"button",onClick:()=>p("new_result","wala"),className:`w-full px-4 py-3 rounded-lg text-left font-medium transition-colors ${b.new_result==="wala"?"bg-blue-600 ring-2 ring-blue-400":"bg-blue-800/50 hover:bg-blue-700"}`,children:["ðŸ‘Š WALA - ",t.wala_fighter]}),e.jsx("button",{type:"button",onClick:()=>p("new_result","draw"),className:`w-full px-4 py-3 rounded-lg text-left font-medium transition-colors ${b.new_result==="draw"?"bg-green-600 ring-2 ring-green-400":"bg-green-800/50 hover:bg-green-700"}`,children:"ðŸ¤ DRAW"}),e.jsx("button",{type:"button",onClick:()=>p("new_result","cancelled"),className:`w-full px-4 py-3 rounded-lg text-left font-medium transition-colors ${b.new_result==="cancelled"?"bg-gray-600 ring-2 ring-gray-400":"bg-gray-700/50 hover:bg-gray-600"}`,children:"âŒ CANCELLED"})]}),D.new_result&&e.jsx("p",{className:"text-sm text-red-500 mb-4",children:D.new_result}),e.jsx("div",{className:"bg-yellow-900/30 border border-yellow-700 p-3 rounded mb-6",children:e.jsx("p",{className:"text-yellow-300 text-sm",children:"âš ï¸ Warning: This will recalculate all payouts for this fight!"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{w(!1),i(null)},className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:k||!b.new_result,className:"flex-1 px-4 py-2 bg-yellow-600 hover:bg-yellow-700 rounded-lg font-medium disabled:opacity-50",children:k?"Changing...":"Change Result"})]})]})]})}),P&&t&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-700",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Change Status - Fight #",t.fight_number]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("button",{onClick:()=>N(t.id,"standby"),disabled:t.status==="standby",className:"w-full px-4 py-3 bg-gray-600 hover:bg-gray-700 rounded-lg text-left font-medium disabled:opacity-50",children:"â¸ï¸ STANDBY"}),e.jsx("button",{onClick:()=>N(t.id,"open"),disabled:t.status==="open",className:"w-full px-4 py-3 bg-green-600 hover:bg-green-700 rounded-lg text-left font-medium disabled:opacity-50",children:"âœ… OPEN BETTING"}),e.jsx("button",{onClick:()=>N(t.id,"lastcall"),disabled:t.status==="lastcall",className:"w-full px-4 py-3 bg-yellow-600 hover:bg-yellow-700 rounded-lg text-left font-medium disabled:opacity-50",children:"âš ï¸ LAST CALL"}),e.jsx("button",{onClick:()=>N(t.id,"closed"),disabled:t.status==="closed",className:"w-full px-4 py-3 bg-red-600 hover:bg-red-700 rounded-lg text-left font-medium disabled:opacity-50",children:"ðŸ”’ CLOSE BETTING"})]}),e.jsx("button",{onClick:()=>{f(!1),i(null)},className:"w-full px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",children:"Cancel"})]})}),B&&t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Set Commission Percentage"}),e.jsxs("p",{className:"text-gray-400 mb-4",children:["Fight #",t.fight_number,": ",t.meron_fighter," vs ",t.wala_fighter]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Commission Percentage (%)"}),e.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:u,onChange:s=>L(s.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white text-lg"}),e.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"Default is 7.5%. This will be deducted from the total pot before payout."})]}),(t.total_meron_bets||0)+(t.total_wala_bets||0)>0&&e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4 mb-6 text-sm",children:[e.jsx("p",{className:"text-gray-400 mb-2",children:"Example with current pot:"}),e.jsxs("div",{className:"space-y-1 text-gray-300",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Pot:"}),e.jsxs("span",{className:"font-semibold",children:["â‚±",((t.total_meron_bets||0)+(t.total_wala_bets||0)).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-purple-400",children:[e.jsxs("span",{children:["Commission (",u,"%):"]}),e.jsxs("span",{className:"font-semibold",children:["â‚±",(((t.total_meron_bets||0)+(t.total_wala_bets||0))*(parseFloat(u)/100)).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-600 pt-1 mt-1",children:[e.jsx("span",{children:"Net Pot:"}),e.jsxs("span",{className:"font-semibold text-green-400",children:["â‚±",(((t.total_meron_bets||0)+(t.total_wala_bets||0))*(1-parseFloat(u)/100)).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{C(!1),i(null)},className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:I,className:"flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg font-medium",children:"Update Commission"})]})]})})]})}export{ae as default};
